<section class="page-content">
  <section class="outer-wrapper">
    <section class="wrapper">
      <header class="emitter-header">
        <h1>{{ emitter ? "Emitter" : "Create Emitter" }}</h1>
        <button
          mat-raised-button
          color="warn"
          class="btn"
          (click)="remove()"
          *ngIf="emitter"
        >
          Delete
        </button>
      </header>
      <form class="form" [formGroup]="form">
        <mat-form-field appearance="outline">
          <mat-label>Channel</mat-label>
          <input matInput placeholder="messages" formControlName="eventName" />
        </mat-form-field>

        <section class="code-actions">
          <p class="code-actions-label">Payload</p>
          <button mat-raised-button (click)="formatPayload()" class="btn">
            Format
          </button>
        </section>

        <section class="payload-editor">
          <ngx-codemirror
            class="editor"
            formControlName="payload"
            [options]="{
              lineNumbers: true,
              theme: 'eclipse',
              mode: { name: 'javascript', json: true },
              smartIndent: true
            }"
            name="payload"
          ></ngx-codemirror>
        </section>

        <footer class="footer">
          <button
            *ngIf="emitter"
            mat-raised-button
            color="primary"
            class="emitter-action btn"
            (click)="update()"
          >
            Update
          </button>
          <button
            mat-raised-button
            color="primary"
            class="emitter-action btn"
            (click)="save()"
          >
            Save
          </button>
          <button
            mat-raised-button
            color="primary"
            class="emitter-action btn"
            (click)="run()"
          >
            Run
          </button>
        </footer>
      </form>
      <section class="response auto-height-code" *ngIf="responseData">
        <header>
          <h3>Response</h3>
        </header>
        <ngx-codemirror
          class="editor"
          [(ngModel)]="responseData"
          [options]="{
            lineNumbers: true,
            theme: 'eclipse',
            mode: { name: 'javascript', json: true },
            smartIndent: true
          }"
          name="payload"
        ></ngx-codemirror>
      </section>
    </section>
  </section>
</section>
